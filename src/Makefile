# Generated by Mirage (Sun, 5 Jan 2014 23:47:05 GMT).

LIBS   = -pkgs lwt.syntax,cohttp.mirage-unix,cow.syntax,cowabloga,cstruct,io-page-unix,lwt,mirage-console-unix,mirage-fs-unix,mirage-http-unix,mirage-types,mirage.types-unix
PKGS   = cohttp cow cowabloga cstruct lwt mirage-console-unix mirage-fs-unix mirage-http-unix mirage-types mirage-unix
SYNTAX = -tags "syntax(camlp4o)"

FLAGS  = -cflag -g -lflags -g,-linkpkg

BUILD  = ocamlbuild -classic-display -use-ocamlfind $(LIBS) $(SYNTAX) $(FLAGS)
OPAM   = opam

.PHONY: all prepare clean build main.native
all: build

prepare:
	$(OPAM) install $(PKGS)

main.native:
	$(BUILD) main.native

main.native.o:
	$(BUILD) main.native.o

build: main.native
	ln -nfs _build/main.native mir-main

run: build
	$(SUDO) ./mir-main
clean:
	ocamlbuild -clean
